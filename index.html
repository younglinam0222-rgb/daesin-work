<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëŒ€ì‹ ì „ê¸°ì¸ë ¥ Â· ì „ê¸° ì „ë¬¸ ì¸ë ¥ì‚¬ë¬´ì†Œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

 <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.0/dist/umd/supabase.min.js"></script>

  <style>
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      font-family:'Noto Sans KR',sans-serif;
      background:#020617;
      color:#e5e7eb;
      line-height:1.5;
    }
    a{text-decoration:none;color:inherit;}

    :root{
      --primary:#0ea5e9;
      --primary-dark:#0369a1;
      --bg:#020617;
      --panel:#0f172a;
      --border:#1f2937;
    }

    header{
      position:sticky;top:0;z-index:50;
      background:rgba(15,23,42,0.97);
      border-bottom:1px solid #1f2937;
    }
    .nav{
      max-width:1100px;margin:0 auto;
      padding:10px 16px;
      display:flex;align-items:center;
      justify-content:space-between;
    }
    .logo{font-size:20px;font-weight:800;color:var(--primary);}
    .nav-menu{display:flex;gap:14px;font-size:14px;}
    .nav-menu a{padding:4px 8px;border-radius:999px;}
    .nav-menu a:hover{background:#1d293b;}
    .nav-call{
      background:#22c55e;color:#022c22;
      padding:6px 12px;border-radius:999px;
      font-weight:700;
      font-size:14px;
    }

    .section{padding:40px 16px;}
    .inner{max-width:1100px;margin:0 auto;}

    .hero{
      background:radial-gradient(circle at top left,#0ea5e9,#020617);
      border-bottom:1px solid #1f2937;
    }
    .hero-grid{
      display:grid;gap:24px;
      grid-template-columns:minmax(0,1.2fr) minmax(0,1fr);
      align-items:center;
    }
    .hero-title{
      font-size:28px;font-weight:800;margin-bottom:10px;
    }
    .hero-title strong{color:#facc15;}
    .hero-text{font-size:15px;color:#e5e7eb;margin-bottom:14px;}
    .hero-actions{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px;}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 18px;border-radius:999px;
      font-size:14px;font-weight:700;cursor:pointer;
      border:1px solid transparent;
    }
    .btn-call{background:#22c55e;color:#022c22;border-color:#16a34a;}
    .btn-kakao{background:#facc15;color:#1f2937;border-color:#eab308;}
    .btn-call:hover{background:#16a34a;}
    .btn-kakao:hover{background:#eab308;}

    .hero-card{
      background:rgba(15,23,42,0.9);
      border-radius:18px;padding:18px;
      border:1px solid #1f2937;
      font-size:14px;
    }
    .hero-row{margin-bottom:8px;}
    .hero-label{font-size:11px;color:#9ca3af;}
    .hero-value{font-weight:700;}
    img.qr{width:150px;border-radius:12px;margin-top:8px;}

    .title{font-size:22px;font-weight:800;margin-bottom:6px;}
    .sub{font-size:13px;color:#9ca3af;margin-bottom:18px;}

    .two-grid{
      display:grid;gap:18px;
      grid-template-columns:repeat(2,minmax(0,1fr));
    }
    .panel{
      background:var(--panel);
      border-radius:16px;
      border:1px solid var(--border);
      padding:18px;
      font-size:14px;
    }
    .panel h3{font-size:18px;margin-bottom:8px;}
    .panel ul{margin-left:16px;margin-top:4px;}
    .panel li{margin-bottom:4px;}

    .form-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:12px 16px;
      margin-top:10px;
    }
    .form-row-full{
      grid-column:1 / -1;
    }
    label{
      display:block;
      font-size:14px;
      margin-bottom:4px;
      color:#e5e7eb;
    }
    input, select, textarea{
      width:100%;
      padding:9px 10px;
      border-radius:8px;
      border:1px solid #374151;
      background:#020617;
      color:#e5e7eb;
      font-size:15px;
    }
    textarea{min-height:90px;resize:vertical;}

    .btn-full{
      display:block;text-align:center;
      margin-top:16px;
      background:var(--primary);
      border-radius:999px;
      padding:11px 0;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
      border:none;
      width:100%;
    }
    .btn-full:hover{background:var(--primary-dark);}

    .notice{
      margin-top:10px;
      font-size:13px;
      color:#9ca3af;
      line-height:1.4;
    }

    .status-msg{
      margin-top:8px;
      font-size:13px;
    }

    footer{
      padding:18px 16px;
      border-top:1px solid #1f2937;
      font-size:11px;
      color:#9ca3af;text-align:center;
    }

    @media(max-width:768px){
      .hero-grid,.two-grid{grid-template-columns:minmax(0,1fr);}
      .hero-title{font-size:22px;}
      .nav-menu{gap:10px;font-size:13px;}
      .nav-call{display:none;}
      .form-grid{grid-template-columns:minmax(0,1fr);}
    }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <a href="#top" class="logo">ëŒ€ì‹ ì „ê¸°ì¸ë ¥</a>
    <nav class="nav-menu">
      <a href="#service">ì—…ë¬´ì†Œê°œ</a>
      <a href="#recruit">ì±„ìš©</a>
      <a href="#partner">í˜‘ì—…ë¬¸ì˜</a>
      <a class="nav-call" href="tel:0328876293">ì „í™” 032-887-6293</a>
    </nav>
  </div>
</header>

<main id="top">
  <!-- ë©”ì¸ ë°°ë„ˆ -->
  <section class="section hero">
    <div class="inner hero-grid">
      <div>
        <h1 class="hero-title">
          <strong>ì „ê¸° ì „ë¬¸ ì¸ë ¥</strong><br>ì „êµ­ ì–´ë””ë“  ì¦‰ì‹œ íˆ¬ì…
        </h1>
        <p class="hero-text">
          ë°°ì„  Â· ë°°ê´€ Â· íŠ¸ë ˆì´ Â· ì¡°ëª… Â· ë™ë ¥ Â· í†µì‹  ë“± ì „ê¸°ê³µì‚¬ ì „ ë¶„ì•¼ ìˆ™ë ¨ ì¸ë ¥ ê³µê¸‰.<br>
          ì¸ì²œÂ·ìˆ˜ë„ê¶Œ ì¤‘ì‹¬, ì „êµ­ í˜‘ë ¥ì‚¬ ë„¤íŠ¸ì›Œí¬ë¡œ ë¹ ë¥´ê²Œ ì¸ë ¥ íˆ¬ì…í•©ë‹ˆë‹¤.
        </p>
        <div class="hero-actions">
          <a href="tel:0328876293" class="btn btn-call">ğŸ“ ë°”ë¡œ ì „í™”í•˜ê¸°</a>
          <button type="button" class="btn btn-kakao"
            onclick="alert('ì¹´ì¹´ì˜¤í†¡ ì•±ì—ì„œ ID ê²€ìƒ‰ â†’ daesin8253 ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.')">
            ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜
          </button>
        </div>
        <p style="font-size:12px;color:#cbd5e1;">
          * ê¸‰í•œ ê±´ì€ ì „í™”ê°€ ê°€ì¥ ë¹ ë¦…ë‹ˆë‹¤.
        </p>
      </div>

      <div class="hero-card">
        <div class="hero-row">
          <div class="hero-label">ëŒ€í‘œë²ˆí˜¸</div>
          <div class="hero-value"><a href="tel:0328876293">032-887-6293</a></div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì¹´ì¹´ì˜¤í†¡ ID</div>
          <div class="hero-value">daesin8253</div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì´ë©”ì¼</div>
          <div class="hero-value">
            <a href="mailto:daesin8253@gmail.com">daesin8253@gmail.com</a>
          </div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì£¼ì†Œ</div>
          <div class="hero-value">ì¸ì²œê´‘ì—­ì‹œ ë¯¸ì¶”í™€êµ¬ ê²½ì¸ë¡œ 1, 3ì¸µ 301í˜¸</div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</div>
          <div class="hero-value">104-92-03100</div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì§ì—…ì†Œê°œì‚¬ì—… ë“±ë¡ë²ˆí˜¸</div>
          <div class="hero-value">ì œ2025-3510578-14-5-00005í˜¸</div>
        </div>
        <div class="hero-row">
          <div class="hero-label">ì¹´ì¹´ì˜¤í†¡ QR</div>
          <img src="./kakao_qr.jpg" alt="ì¹´ì¹´ì˜¤í†¡ QR" class="qr">
        </div>
      </div>
    </div>
  </section>

  <!-- ì—…ë¬´ ì†Œê°œ -->
  <section id="service" class="section">
    <div class="inner">
      <h2 class="title">ì—…ë¬´ ì†Œê°œ</h2>
      <p class="sub">ì „ê¸° ì¸ë ¥ì´ ì£¼ë ¥ì´ë©°, ê±´ì„¤Â·ì¸í…Œë¦¬ì–´Â·ì² ê±°Â·ì²­ì†Œ ì¸ë ¥ì€ ì„œë¸Œë¡œ ì§€ì›í•©ë‹ˆë‹¤.</p>

      <div class="two-grid">
        <div class="panel">
          <h3>ì „ê¸° ì „ë¬¸ ì¸ë ¥</h3>
          <ul>
            <li>ë°°ì„  Â· ë°°ê´€ Â· íŠ¸ë ˆì´ Â· ì¡°ëª… Â· ë™ë ¥ Â· í†µì‹ </li>
            <li>í˜„ì¥ ì†Œì¥ë‹˜ê³¼ ì§ì ‘ ì†Œí†µ ê°€ëŠ¥í•œ Aê¸‰ ê¸°ìˆ ì</li>
            <li>ì¥Â·ë‹¨ê¸° íŒŒê²¬, ì•¼ê°„Â·ì£¼ë§ ì¸ë ¥ ì§€ì›</li>
          </ul>
        </div>
        <div class="panel">
          <h3>ê±´ì„¤ Â· ì¸í…Œë¦¬ì–´ Â· ì² ê±° Â· ì²­ì†Œ</h3>
          <ul>
            <li>ê³µì‚¬ ë³´ì¡°, ìì¬ ìš´ë°˜, ë§ˆê° ì •ë¦¬ ì¸ë ¥</li>
            <li>ì†Œê·œëª¨ ì² ê±° ë° ê³µì‚¬ í›„ ì²­ì†Œ</li>
            <li>í˜‘ë ¥ì—…ì²´ì™€ ì¥ê¸° íŒŒíŠ¸ë„ˆì‹­ ê°€ëŠ¥</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ì „ê¸° ì¸ë ¥ ì±„ìš© ì§€ì› -->
  <section class="section" id="recruit">
    <div class="inner">
      <h2 class="title">ì „ê¸° ì¸ë ¥ ì±„ìš© ì§€ì›</h2>
      <p class="sub">
        ê°„ë‹¨íˆ ì‘ì„±í•´ ì£¼ì‹œë©´ ë‹´ë‹¹ìê°€ í™•ì¸ í›„ ë°”ë¡œ ì „í™”ë“œë¦½ë‹ˆë‹¤.
      </p>

      <div class="panel">
        <form id="recruitForm">
          <div class="form-grid">
            <div>
              <label for="region">ì§€ì—­</label>
              <input id="region" name="region" placeholder="ì˜ˆ) ì¸ì²œ, ë¶€ì²œ, ê¹€í¬ ë“±">
            </div>
            <div>
              <label for="age">ë‚˜ì´</label>
              <input id="age" name="age" placeholder="ì˜ˆ) 45ì„¸">
            </div>
            <div>
              <label for="career">ì „ê¸°ê³µ ê²½ë ¥</label>
              <input id="career" name="career" placeholder="ì˜ˆ) ê²½ë ¥ 10ë…„, ì´ˆë³´, ì¡°ê³µ ë“±">
            </div>
            <div>
              <label for="specialty">ì£¼íŠ¹ê¸°</label>
              <input id="specialty" name="specialty" placeholder="ì˜ˆ) ë°°ê´€, íŠ¸ë ˆì´, ë™ë ¥, í†µì‹  ë“±">
            </div>
            <div>
              <label for="car_own">ìì°¨ ì—¬ë¶€</label>
              <select id="car_own" name="car_own">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ìˆìŒ">ìˆìŒ</option>
                <option value="ì—†ìŒ">ì—†ìŒ</option>
              </select>
            </div>
            <div>
              <label for="phone">ì—°ë½ì²˜</label>
              <input id="phone" name="phone" placeholder="ì˜ˆ) 010-0000-0000">
            </div>
            <div class="form-row-full">
              <label for="memo">ê¸°íƒ€ ë©”ëª¨</label>
              <textarea id="memo" name="memo" placeholder="í¬ë§ ë‹¨ê°€, ê°€ëŠ¥ ì§€ì—­, ê·¼ë¬´ ê°€ëŠ¥ ìš”ì¼ ë“± ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”."></textarea>
            </div>
          </div>

          <button type="submit" class="btn-full" id="recruitSubmit">ì§€ì›ì„œ ë³´ë‚´ê¸°</button>
          <div id="recruitStatus" class="status-msg"></div>

          <p class="notice">
            â€» ì„œë¥˜ ì œì¶œ ì•ˆë‚´<br>
            ì§€ì›ì„œ í™•ì¸ í›„ ë‹´ë‹¹ìê°€ ê°œë³„ ì—°ë½ë“œë¦¬ë©°,<br>
            ì‹ ë¶„ì¦ Â· ê±´ì„¤ê¸°ì´ˆì•ˆì „êµìœ¡ ì´ìˆ˜ì¦ Â· í†µì¥ì‚¬ë³¸ ë“±ì€
            ë³¸ì¸ í™•ì¸ ì ˆì°¨ í›„ ë³„ë„ë¡œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.<br>
            í™ˆí˜ì´ì§€ì—ì„œëŠ” ì–´ë– í•œ ë¯¼ê°ì •ë³´ë„ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
          </p>
        </form>
      </div>
    </div>
  </section>

  <!-- í˜‘ì—… Â· ì œíœ´ ë¬¸ì˜ -->
  <section class="section" id="partner">
    <div class="inner">
      <h2 class="title">í˜‘ì—… Â· ì œíœ´ ë¬¸ì˜</h2>
      <p class="sub">
        ì „ê¸°ê³µì‚¬ ë„ê¸‰Â·í•˜ë„ê¸‰, ì¥ê¸° íŒŒê²¬, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ í˜‘ì—…ì€ ì•„ë˜ ë‚´ìš©ì„ ë‚¨ê²¨ ì£¼ì‹œë©´
        ë‹´ë‹¹ìê°€ ì§ì ‘ ì „í™”ë“œë¦½ë‹ˆë‹¤.
      </p>

      <div class="panel">
        <form id="partnerForm">
          <div class="form-grid">
            <div>
              <label for="p_type">í˜‘ì—… ë¶„ì•¼</label>
              <select id="p_type" name="type">
                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                <option value="ì „ê¸°ê³µì‚¬">ì „ê¸°ê³µì‚¬</option>
                <option value="ì¥ê¸°íŒŒê²¬">ì¥ê¸° íŒŒê²¬</option>
                <option value="ì² ê±°Â·ì¸í…Œë¦¬ì–´">ì² ê±°Â·ì¸í…Œë¦¬ì–´</option>
                <option value="ì²­ì†ŒÂ·ê¸°íƒ€">ì²­ì†Œ / ê¸°íƒ€</option>
              </select>
            </div>
            <div>
              <label for="p_company">íšŒì‚¬ëª…</label>
              <input id="p_company" name="company" placeholder="ì˜ˆ) ãˆœâ—‹â—‹ì „ê¸°">
            </div>
            <div>
              <label for="p_manager">ë‹´ë‹¹ìëª…</label>
              <input id="p_manager" name="manager" placeholder="ì˜ˆ) í™ê¸¸ë™ ì†Œì¥">
            </div>
            <div>
              <label for="p_phone">ì—°ë½ì²˜</label>
              <input id="p_phone" name="phone" placeholder="ì˜ˆ) 010-0000-0000">
            </div>
            <div>
              <label for="p_email">ì´ë©”ì¼</label>
              <input id="p_email" name="email" placeholder="í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ìˆìœ¼ë©´ ì¢‹ìŠµë‹ˆë‹¤.">
            </div>
            <div>
              <label for="p_schedule">í¬ë§ ì¼ì •</label>
              <input id="p_schedule" name="schedule" placeholder="ì˜ˆ) 3ì›” ë‘˜ì§¸ì£¼ë¶€í„° 2ê°œì›” ë“±">
            </div>
            <div class="form-row-full">
              <label for="p_message">ìƒì„¸ ë‚´ìš©</label>
              <textarea id="p_message" name="message" placeholder="í˜„ì¥ ìœ„ì¹˜, ê³µì‚¬ ê·œëª¨, í•„ìš” ì¸ì›/ê¸°ê°„ ë“±ì„ ì ì–´ ì£¼ì„¸ìš”."></textarea>
            </div>
          </div>

          <button type="submit" class="btn-full" id="partnerSubmit">í˜‘ì—… ë¬¸ì˜ ë³´ë‚´ê¸°</button>
          <div id="partnerStatus" class="status-msg"></div>
        </form>
      </div>
    </div>
  </section>
</main>

<footer>
  Â© ëŒ€ì‹ ì „ê¸°ì¸ë ¥. All Rights Reserved.
</footer>


<script>
/* =======================
   0) ì•ˆì „ ì²´í¬
======================= */
if (typeof supabase === "undefined") {
  alert("Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë”©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. <head>ì— supabase.min.jsê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
}
if (typeof emailjs === "undefined") {
  alert("EmailJS ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë”©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. <head>ì— email.min.jsê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
}

/* =======================
   1) Supabase ì„¤ì •
======================= */
const SUPABASE_URL = "https://xovvbkcngfcndkhxwyqd.supabase.co"; // âœ… / ì—†ì´
const SUPABASE_ANON_KEY = "sb_publishable_O_RB3eRmGYDRZfwIfbWoCQ_izEVlw6J";

const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

/* =======================
   2) EmailJS ì„¤ì •
======================= */
const EMAILJS_PUBLIC_KEY  = "Dg6kq6qcxRykF-dpn";
const EMAILJS_SERVICE_ID  = "daesin-work";  // âœ… Service ID (ëŒ€ì‹œë³´ë“œ ê·¸ëŒ€ë¡œ)
const EMAILJS_TEMPLATE_ID = "daesin-work";  // âœ… Template ID (ëŒ€ì‹œë³´ë“œ ê·¸ëŒ€ë¡œ)

emailjs.init(EMAILJS_PUBLIC_KEY);

/* =======================
   ê³µí†µ: ë²„íŠ¼ ìƒíƒœ
======================= */
function setButtonState(button, text, disabled) {
  button.textContent = text;
  button.disabled = disabled;
  button.style.opacity = disabled ? 0.6 : 1;
}

/* =======================
   ê³µí†µ: ê°’ ì •ë¦¬
======================= */
function v(x) {
  return (x ?? "").toString().trim();
}

/* =======================
   ê³µí†µ: ë©”ì¼ ë³´ë‚´ê¸°
   - í…œí”Œë¦¿ì— {{title}}, {{name}}, {{message}} ìˆì–´ì•¼ í•¨
======================= */
async function sendMail({ title, name, message }) {
  return emailjs.send(
    EMAILJS_SERVICE_ID,
    EMAILJS_TEMPLATE_ID,
    { title, name, message }
  );
}

/* ============================================================
   3) ì±„ìš© ì§€ì› í¼ (recruitForm)
============================================================ */
document.getElementById("recruitForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const btn = document.getElementById("recruitSubmit");
  const statusEl = document.getElementById("recruitStatus");
  setButtonState(btn, "ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...", true);
  statusEl.textContent = "";

  const f = e.target;

  const payload = {
    region: v(f.region.value),
    age: v(f.age.value),
    career: v(f.career.value),
    specialty: v(f.specialty.value),
    car_own: v(f.car_own.value),
    phone: v(f.phone.value),
    memo: v(f.memo.value),
  };

  console.log("[recruit] payload:", payload);

  try {
    // 1) Supabase ì €ì¥
    const { error } = await sb.from("recruit_applications").insert([payload]);
    if (error) throw error;

    // 2) EmailJS ë©”ì¼ ì „ì†¡
    const mailTitle = "ì „ê¸° ì¸ë ¥ ì±„ìš© ì§€ì›";
    const mailName  = `${payload.region} / ${payload.age}ì„¸ / ${payload.career}`;
    const mailMsg =
      `âœ… ì „ê¸° ì¸ë ¥ ì±„ìš© ì§€ì› ì ‘ìˆ˜\n\n` +
      `ì§€ì—­: ${payload.region}\n` +
      `ë‚˜ì´: ${payload.age}\n` +
      `ì „ê¸°ê³µ ê²½ë ¥: ${payload.career}\n` +
      `ì£¼íŠ¹ê¸°: ${payload.specialty}\n` +
      `ìì°¨ ì—¬ë¶€: ${payload.car_own}\n` +
      `ì—°ë½ì²˜: ${payload.phone}\n` +
      `ê¸°íƒ€ ë©”ëª¨: ${payload.memo}\n`;

    try {
      await sendMail({ title: mailTitle, name: mailName, message: mailMsg });
      console.log("[recruit] EmailJS sent");
    } catch (mailErr) {
      // DBëŠ” ì €ì¥ëìœ¼ë‹ˆ, ë©”ì¼ë§Œ ì‹¤íŒ¨í–ˆì„ ë•Œ ë¡œê·¸ë¡œë§Œ ë‚¨ê¹€
      console.error("[recruit] EmailJS error:", mailErr);
    }

    statusEl.style.color = "#4ade80";
    statusEl.textContent = "ì •ìƒì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ ìˆœì°¨ì ìœ¼ë¡œ ì—°ë½ë“œë¦½ë‹ˆë‹¤.";
    f.reset();

  } catch (err) {
    console.error("[recruit] error:", err);
    statusEl.style.color = "#f97373";
    statusEl.textContent = "ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
    alert("ì „ì†¡ ì˜¤ë¥˜: " + (err?.message || err));
  } finally {
    setButtonState(btn, "ì§€ì›ì„œ ë³´ë‚´ê¸°", false);
  }
});

/* ============================================================
   4) í˜‘ì—…/ì œíœ´ ë¬¸ì˜ í¼ (partnerForm)
============================================================ */
document.getElementById("partnerForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const btn = document.getElementById("partnerSubmit");
  const statusEl = document.getElementById("partnerStatus");
  setButtonState(btn, "ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...", true);
  statusEl.textContent = "";

  const f = e.target;

  const payload = {
    type: v(f.type.value),
    company: v(f.company.value),
    manager: v(f.manager.value),
    phone: v(f.phone.value),
    email: v(f.email.value),
    schedule: v(f.schedule.value),
    message: v(f.message.value),
  };

  console.log("[partner] payload:", payload);

  try {
    // 1) Supabase ì €ì¥
    const { error } = await sb.from("partner_inquiries").insert([payload]);
    if (error) throw error;

    // 2) EmailJS ë©”ì¼ ì „ì†¡
    const mailTitle = "í˜‘ì—… Â· ì œíœ´ ë¬¸ì˜";
    const mailName  = `${payload.company} / ${payload.manager}`;
    const mailMsg =
      `âœ… í˜‘ì—… Â· ì œíœ´ ë¬¸ì˜ ì ‘ìˆ˜\n\n` +
      `í˜‘ì—… ë¶„ì•¼: ${payload.type}\n` +
      `íšŒì‚¬ëª…: ${payload.company}\n` +
      `ë‹´ë‹¹ì: ${payload.manager}\n` +
      `ì—°ë½ì²˜: ${payload.phone}\n` +
      `ì´ë©”ì¼: ${payload.email}\n` +
      `í¬ë§ ì¼ì •: ${payload.schedule}\n\n` +
      `ìƒì„¸ ë‚´ìš©:\n${payload.message}\n`;

    try {
      await sendMail({ title: mailTitle, name: mailName, message: mailMsg });
      console.log("[partner] EmailJS sent");
    } catch (mailErr) {
      console.error("[partner] EmailJS error:", mailErr);
    }

    statusEl.style.color = "#4ade80";
    statusEl.textContent = "ì •ìƒì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìê°€ ìˆœì°¨ì ìœ¼ë¡œ ì—°ë½ë“œë¦½ë‹ˆë‹¤.";
    f.reset();

  } catch (err) {
    console.error("[partner] error:", err);
    statusEl.style.color = "#f97373";
    statusEl.textContent = "ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
    alert("ì „ì†¡ ì˜¤ë¥˜: " + (err?.message || err));
  } finally {
    setButtonState(btn, "í˜‘ì—… ë¬¸ì˜ ë³´ë‚´ê¸°", false);
  }
});
</script>

</body>
</html>